---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kibana
  namespace: cocktail-addon
  labels:
    app: kibana
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: kibana
  namespace: cocktail-addon
  labels:
    app: kibana
rules:
- apiGroups: ['extensions']
  resources: ['podsecuritypolicies']
  verbs:     ['use']
  resourceNames:
  - elasticsearch-psp
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: kibana
  name: kibana-rolebinding
  namespace: cocktail-addon
roleRef:
  kind: Role
  name: kibana
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: ServiceAccount
  name: kibana
  namespace: cocktail-addon
---
apiVersion: v1
kind: Secret
metadata:
  name: kibana
  namespace: cocktail-addon
type: Opaque
data:
  kb-username: a2liYW5hc2VydmVy
  kb-password: a2liYW5hc2VydmVy
  kibana.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURXRENDQWtDZ0F3SUJBZ0lVQzVCdFVQRjZIdisybWFRNkdFeDBnTWtSaytFd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0VURVBNQTBHQTFVRUF3d0dVbTl2ZEVOQk1CNFhEVEl3TURneU5qQXlNek13TVZvWERUTXdNRGd5TkRBeQpNek13TVZvd0VURVBNQTBHQTFVRUF3d0dhMmxpWVc1aE1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXRYaGRSRjlWTVI1Qmp6bTc1VEFPL29IZjVYSGdEdUp6ZnQyMjkyQ1NwVVllc0VOMFBYWDkKNThEYkR0bms3elN5N29rZjNzZEVrazhNRE0zQ1dWYy9hZ3NsN2RibllHSituSE51enp5d0d2VkRNWGhCNDRIWgpxNEFqdVFQeURoZlhsZHkzSmZTc1NvYzRzUXdncEIzelltZGUvZkI0ZFZERTJSTnJxQWtBV3BOQnpyK1N1dkJ6CkFxWnhQd2lnUVlhQmdSQ05BOXUrMVdndTdwL3cwOHBhaVVsY2JpVjhhYTh3bHRRTmh0eGIxWmRsZWloSTgwVzMKTkFIVGwxSG5FSVNaNVNSblBSU0p5eUxtZkNYL0wrbE0xNVA0N3NOYnRvVWZMT1MvaThHMS9BSFVxL09ZNGh1SgpidXFSelVibjRMMklZWTBrQVRIRzQvRWk2NzFjN2RSVFR3SURBUUFCbzRHbk1JR2tNQWtHQTFVZEV3UUNNQUF3CkRnWURWUjBQQVFIL0JBUURBZ1R3TUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQm8KQmdOVkhSRUVZVEJmZ2dsc2IyTmhiR2h2YzNTQ0ZXdHBZbUZ1WVM1amIyTnJkR0ZwYkMxaFpHUnZib0laYTJsaQpZVzVoTG1OdlkydDBZV2xzTFdGa1pHOXVMbk4yWTRJVWFHUmpZWEprTFd0aUxtRmpiRzkxWkM1eWRXNkhCSDhBCkFBR0hCR1UzUlc0d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFIb25pYWZrL0Qrc1B4N1VOUlBXYjFQVllsODkKTEVkNnFBSXFHajlYdGRtYTVNSkdvWUppTkl6ZG1Lb2pRSFFZcmVOdGUxUmplUHk2SUYvQm9jQ0piVHorRndyOAo5L0pDOTZPL1NURkRHbHVGeDUwaDhEaTdNdExYbXFMVDVJdUxhOU80RFZUS0xGQ3RFUWNiak1ZelAvd1pZdGt6CjJyOWRFc1dYNStkMGFYZUVCVzdiUm9XYnFuTGZWTW9oMmZDZWtnUHVXMU1BRi80VEFyMUphbHZtaHVpWkFzby8Kb0VTbk56bmFhZm42NngzYmFOYUVxeU1GS25WMUwxbHcrQ0huMnJHa2pEM2ZaNU9JRVVwMWhHZEVnbzBjSGJKcQpKRGIvRVdHcVBvWGtFMFA4VklMM1IwdWFXT1VNeVZuSTN1SHBrdWYxVUlpanZRcjF1KzdYeHJ5b0laRT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJQzBEQ0NBYmlnQXdJQkFnSVVjWkltSFlnQTZQeFRUVG1ndFA2MW1EeHVLaFV3RFFZSktvWklodmNOQVFFTApCUUF3RVRFUE1BMEdBMVVFQXd3R1VtOXZkRU5CTUI0WERUSXdNRGd5TmpBeU16QXdPVm9YRFRNd01EZ3lOREF5Ck16QXdPVm93RVRFUE1BMEdBMVVFQXd3R1VtOXZkRU5CTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEEKTUlJQkNnS0NBUUVBd2Z4Zld3eXpxRVdRWVZoSUFwbitVVVVHWG4rUWduYkJiUFNwRGN3QTFINVRDT0VBQi84TQpMay9MTGpMSlZ5QWpGWE00SWE4QXVUTXJFR0dQbHlPb0ZZVERmaXp1NVN3b1FnUTBvdS9mQi9BOXV0dkNVSmZhCmtKaWxtcW1JcTV4eWRLUjNQQlBOWWVKQ0tTTmx1SDdVcnVWNHgwMXBOMkprM1dPZVhDRFEwS2w3UGw2Zk1LejQKalhjSFB3MzJCRUN6S1h1UFJGRGozejdsTmxZdWQvUHVLQVB3ekM2dGRFOVArUUNGdXV3WkZEYnc3WEJWWU9RMgphODNHeXB3dUFLVXd6cWw3amV1NXJCSWl2VzBaQjFFbXZRcVc3bVN2SEFMVmVrQlV3a0FmNXJacXlUc2FNb01HCnp4MVBGb1pRYnZmNlI5bVR3clNJUWFVdXhPSGd3d2FZV3dJREFRQUJveUF3SGpBTUJnTlZIUk1FQlRBREFRSC8KTUE0R0ExVWREd0VCL3dRRUF3SUJoakFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBZW5qKzZha3FGZXgxSHJvOApmSzFxQjA3U2dWMmFXQWdWR0srNk5BdW8zR2UzMzRCOE0raDlSOVI3cXVrMFZJdjYzRTBZTGsxdUVGUEpMUzBsCjVhZ0tTYmllR2lTYUgyMGZrdy9hNS9HZ01tblc0ZjVvUUF3MnFPOUl0R1ZldHdjWW5KM1NTbkdubUJVQWRTTU4KY2haRlA1dE9td1p6RUlNZ05aMWJLSitBNVJ0QjF6SC9ZU25VZ3lia1RwOUcyMnMwQUJqSytVM1d2b2RuS1hCOAptUWdocDRnYXZLUFRHNjN2WkQxZE5wSnVrWG1Kckc1dzhZTUFybjdwSXVDbEE5YUpzRHM1M1UxUjhYRE44ZmZTCitwK1dzYzBxMnFnajVaTWlXeW05cHBSN0I0MWI5V1d5OTNLSmg0ZTRSRGhMeldTOXlGWExGb0N2MGFtcnIwUnoKUHhSbUFnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  kibana.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRQzFlRjFFWDFVeEhrR1AKT2J2bE1BNytnZC9sY2VBTzRuTiszYmIzWUpLbFJoNndRM1E5ZGYzbndOc08yZVR2TkxMdWlSL2V4MFNTVHd3TQp6Y0paVno5cUN5WHQxdWRnWW42Y2MyN1BQTEFhOVVNeGVFSGpnZG1yZ0NPNUEvSU9GOWVWM0xjbDlLeEtoeml4CkRDQ2tIZk5pWjE3OThIaDFVTVRaRTJ1b0NRQmFrMEhPdjVLNjhITUNwbkUvQ0tCQmhvR0JFSTBEMjc3VmFDN3UKbi9EVHlscUpTVnh1Slh4cHJ6Q1cxQTJHM0Z2VmwyVjZLRWp6UmJjMEFkT1hVZWNRaEpubEpHYzlGSW5MSXVaOApKZjh2NlV6WGsvanV3MXUyaFI4czVMK0x3Ylg4QWRTcjg1amlHNGx1NnBITlJ1Zmd2WWhoalNRQk1jYmo4U0xyCnZWenQxRk5QQWdNQkFBRUNnZ0VBWjFhTGhndmpyM3pUU0lSUUEwdEN2cHVtckRvVXBXVSs3OWZDQVV6MU5UaWcKOFM3NFdxZCtWeUx6bTVscFRPNXRsbmh2dGFVejN6MDBWM1kwWGp2WTJNSlFid2daNmtFc2FGc3pscit3YVNtUgpnZkpCVXhUMnB6cnBITXFxWkd3ZlVDL0grODFBNzQvaE1MRC9SWFhveXZpaWwya0FyNDIzQ3dhTUg3eEFmMUsyCmZuQWxWNndFbC9rdFNSUWdXejEzRkVkVFdUdi9EQWVxR050NUJpNkQvL2RkT0RKZEl2QVh3MFFHbFJPTW1CZnIKSTFJb3JIQUhhSVBYendhbXlobk13d0hYbmltMEdvQkU3bEV2aUlGdEZBb2ZnRXNLd2p0UDJWTjg5MFd4Mi8vZQp0VEQyaTd2eExFcXBaT25TLzZnVGdMSjF2Z3lqRCtWY0R6SEdwQUhXUVFLQmdRRGFlTXQ4RWU1dWtPNnFSbjJHCjVUVjh5UTZjeU56T29hdHNTaHJLZnlEejh6dVVqRUZUZ2NLN1J1dm5HbXdjby9DNHpGdVBobXB3QmdPWHVDbnoKeFdlUkdPQngyZ2hrZDJlQnNDSDR0Q055M29wUGJSdTY0VEFxMVl6b0dCcFFzcGU5eE5WdkdOYjRlMUdGUzIycgprTjRBZzAwUi9PR2lnUFYvajEwTTJNdEdRd0tCZ1FEVXBHL0JOK1hJRFdzaUd3MFhtK0R4dUM3aWovTVZQbVJyCjd3ODA2cVNjaWxlTjc0RG44MDFhSUFkQXBha0ladWZLZ25jeTdwU1NCeDQ1akJWT3FIUm42OVJFTUp0TnZnMmEKWGNnQlFqTlkzWDYrckJ5b3p5VGVQN2ttV0hpK0h0K0IwcWFyd2NtYjBNZVpwektUVmh1bmFyK3JaTk11SDZWMApXdWpPWG1iOEJRS0JnUUNCN3ErT3BaZDVtS2JwREMxaHlmWXF0ZVVENkE0eXNrSWlrRndvckwwcmVUQ3BJMVZDCjFmeTdwdTFzTC9HMmd1WUs4amRPUC9JVGwvQVJEczJjbG40RzlKV2dBTDFYQ3hDN044YXNoRzVFeGdmYVB4anIKNXp2ZmJjeDB5TWoxejVHaG9td1J1K00yT3hsN3ZpV0drUTBIbnc5Nk1EejlpZGI0TzRwcXRwRUd3d0tCZ0dUaApybk5JaGFjblZwQlRyUjVxUVluc0M3SkpBTll2UjQwOVdVV05uSkwzdnhvRGFuQ2dxUzM4eS9RTG8rbnNpRU0zCktqM3JtbWk5SDhYRmc4WlJmUWhnaGMva0Q0b09oSDJieUd0d2NOUFVJWEZzVGh4NFNkRjNBZXdEUlNWTm1GUUwKRUMra1BIWEQweTQrZUd3V0NnQ2ZVRmVMK2ZTRDV3Y1FxaXBkOXhYUkFvR0FFa1Y0VStScU02WVgwWjV3K2hwWAo1UUlZeFhxdHRFOU1UTTk0czRKTU13VXB1eGVrREZOQ3R1VWFTWWVmUUw2VTVGRGhqL1hoV1l5U0MybUJnYUR0CnMrSmZTRTNzNEdCT2c3dVYxaWlkeUZzZW1mMFArK2wvdk5tWVg5Z0h1ZHczK0NqYnVGYkJ3dnErS2RKNGNLdVgKZHBZdFRTM2tzVnpLcXcvT216b2x2RHc9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUdMVENDQlJXZ0F3SUJBZ0lSQVBQcGJBWjFpY1RxMml6NmRuTzNFNE13RFFZSktvWklodmNOQVFFTEJRQXcKZ1k4eEN6QUpCZ05WQkFZVEFrZENNUnN3R1FZRFZRUUlFeEpIY21WaGRHVnlJRTFoYm1Ob1pYTjBaWEl4RURBTwpCZ05WQkFjVEIxTmhiR1p2Y21ReEdEQVdCZ05WQkFvVEQxTmxZM1JwWjI4Z1RHbHRhWFJsWkRFM01EVUdBMVVFCkF4TXVVMlZqZEdsbmJ5QlNVMEVnUkc5dFlXbHVJRlpoYkdsa1lYUnBiMjRnVTJWamRYSmxJRk5sY25abGNpQkQKUVRBZUZ3MHlNREF6TURRd01EQXdNREJhRncweU1UQTJNREl5TXpVNU5UbGFNQmN4RlRBVEJnTlZCQU1NRENvdQpZV05zYjNWa0xuSjFiakNDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFNQWdlV2xnCnNYKzBMUHlwOHk2cXAvUWJjUXkvUU5HRzdnU0tEMml0bXdueVFIV2E2eCtMVGd4QjgyTWc3ZXdMT294K0wrcHMKZmxzZzQ5NXVlSTJjMnB3QzU5cEdNSFZlancxTHlqV0hZNzIrdEFrNnNlbG10UFdlc0pqb2x4U0lrMVUxdG4wSQo5akhtVWNvT01iWTJIUWN6UGdFT3oyRDJ4NnVOUFFvZFV1dmF1d2JWL2pJOGZMYjlEc0wyZENPa0ZJUk1kbzJjCk1ydXVocXl5cnZmVHhPc29PYlBYNkZrcVZMeWR2S3lTamJNdmZOeFVyR0xPUFBLaHpqQml0WWRSdHNxYXpxU3AKajh4eGFpYklzcThGWDhHSDBxWEpxb1ZiT1ZiV1ZEd0R6VEhsNy9GU2FrV1FZVnRzb2ZOblZ5b0VOanRlb1NJRwpGUmVTSGlpWGpzNDExLzBDQXdFQUFhT0NBdmt3Z2dMMU1COEdBMVVkSXdRWU1CYUFGSTJNWHNSVXJZcmhkK21iCitac0Y0YmdCaldIaE1CMEdBMVVkRGdRV0JCVDAxOW02ZWtSWFFkZ0pWdHpnT1RCRVhnaDhhekFPQmdOVkhROEIKQWY4RUJBTUNCYUF3REFZRFZSMFRBUUgvQkFJd0FEQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBUVlJS3dZQgpCUVVIQXdJd1NRWURWUjBnQkVJd1FEQTBCZ3NyQmdFRUFiSXhBUUlDQnpBbE1DTUdDQ3NHQVFVRkJ3SUJGaGRvCmRIUndjem92TDNObFkzUnBaMjh1WTI5dEwwTlFVekFJQmdabmdRd0JBZ0V3Z1lRR0NDc0dBUVVGQndFQkJIZ3cKZGpCUEJnZ3JCZ0VGQlFjd0FvWkRhSFIwY0RvdkwyTnlkQzV6WldOMGFXZHZMbU52YlM5VFpXTjBhV2R2VWxOQgpSRzl0WVdsdVZtRnNhV1JoZEdsdmJsTmxZM1Z5WlZObGNuWmxja05CTG1OeWREQWpCZ2dyQmdFRkJRY3dBWVlYCmFIUjBjRG92TDI5amMzQXVjMlZqZEdsbmJ5NWpiMjB3SXdZRFZSMFJCQnd3R29JTUtpNWhZMnh2ZFdRdWNuVnUKZ2dwaFkyeHZkV1F1Y25WdU1JSUJmUVlLS3dZQkJBSFdlUUlFQWdTQ0FXMEVnZ0ZwQVdjQWRRQjlQdkw0ai8rSQpWV2drd3NES25sS0plU3ZGRG5nSmZ5NXFsMmlaZmlMdzF3QUFBWENqRmU0OUFBQUVBd0JHTUVRQ0h4YTBSSjE1ClcrM3FXOUMxd1dOZW1LV3M1QmN0MlVLUzE3bjlBSmlmMDZNQ0lRQzVUbVhmWFJCWnQ4c0lyTEFoazA0bGIzSlMKd1hwd1BIbzJsQll6S2tLbXJRQjNBSlFndkI2TzFZMXNpSE1mZ29zaUxBM1IyazFlYkUrVVBXSGJUaTlZVGFMQwpBQUFCY0tNVjdnMEFBQVFEQUVnd1JnSWhBSzA4bUpUSklhVVJ5dVpQUEZ1U0J0cFdHRXN5VTBwRmJRSUZ6T2ZNCnRvYW9BaUVBNXpMbnFGVHBKVU54by9tRGZxTEdoalV0bk8rMEN5SkYybXV5M2NWZ3k5Z0FkUUJFbEdVdXNPN08KcjhSQUI5aW8vaWpBMnVhQ3Z0akxNYlUvMHpPV3RiYUJxQUFBQVhDakZlNkhBQUFFQXdCR01FUUNJRlh6WVdpQgpVSi95UzBxVDByVlVBeUF0b3hwK0h2V3BQcVE3dDE3dlBHcy9BaUJJQko2VWc4dG1QTWhzN0JYRXhwTUMyZU1WCjZlUHNkYmdQNGpNeXFSRUFuREFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBQXpkaG56RDVpSjlWTWdxVHltTHcKZGdRTmMvQ1d2Z0xLTWdNQ2RGZENQNkEyTVIwelRreGtDdVJOODN6SVljQ1FBdmpkMXU1YTJRSEdNSHArcUQrWQpZUXU2RVlLQWZ6RUtKdFVCbENMZjNDdmg1RFpVQ0d3V1cwWjl1ZnZaTFp5MFBMcnpLTFVSdzVVZmZRL0JtNytWClhLbVkrLzUxeEVEa1RRWmVjVHFOY1VYQlVJQ2lleTFpQTlxUmdrK2JiMTduYm9zdDNRYnFKVEIwc0ZaMzJpUU4KRnNrcklxVmNpKzRvTnVOMnRyZWlHYlZQdlpyeStleWVpa0h6a2huUnlzVGR5TkI0bTdOSkdhSjZUd0YvNHdCUwpFQ1p4L0pvUmx0T1Z3OW9DYUhjL0V0bURqSzdLVVdkTHZOU2pya29ZRGNCUVpWajdqUkV3K3d4NzhWcVp0azRZCmVnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJR0V6Q0NBL3VnQXdJQkFnSVFmVnRSSnJSMnVoSGJkQllMdkZNTnB6QU5CZ2txaGtpRzl3MEJBUXdGQURDQgppREVMTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrNWxkeUJLWlhKelpYa3hGREFTQmdOVkJBY1RDMHBsCmNuTmxlU0JEYVhSNU1SNHdIQVlEVlFRS0V4VlVhR1VnVlZORlVsUlNWVk5VSUU1bGRIZHZjbXN4TGpBc0JnTlYKQkFNVEpWVlRSVkpVY25WemRDQlNVMEVnUTJWeWRHbG1hV05oZEdsdmJpQkJkWFJvYjNKcGRIa3dIaGNOTVRneApNVEF5TURBd01EQXdXaGNOTXpBeE1qTXhNak0xT1RVNVdqQ0JqekVMTUFrR0ExVUVCaE1DUjBJeEd6QVpCZ05WCkJBZ1RFa2R5WldGMFpYSWdUV0Z1WTJobGMzUmxjakVRTUE0R0ExVUVCeE1IVTJGc1ptOXlaREVZTUJZR0ExVUUKQ2hNUFUyVmpkR2xuYnlCTWFXMXBkR1ZrTVRjd05RWURWUVFERXk1VFpXTjBhV2R2SUZKVFFTQkViMjFoYVc0ZwpWbUZzYVdSaGRHbHZiaUJUWldOMWNtVWdVMlZ5ZG1WeUlFTkJNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DCkFROEFNSUlCQ2dLQ0FRRUExbk16MXRjOElOQUEwaGRGdU5ZK0I2SS94MEh1TWpESnNHejk5Si9MRXBnUExUK04KVFFFTWdnOFhmMkl1NmJoSWVmc1dnMDZ0MXpJbGs3Y0h2N2xRUDZsTXcwQXE2VG4vMllIS0h4WXlRZHFBSnJragplb2NnSHVQL0lKbzhsVVJ2aDNVR2tFQzBNcE1XQ1JBSUl6N1MzWWNQYjExUkZHb0thY1ZQQVhKcHo5T1RURzBFCm9LTWJnbjZ4bXJudHhaN0ZOM2lmbWdnMCsxWXVXTVFKRGdaa1c3dzMzUEdmS0dpb1ZyQ1NvMXlmdTRpWUNCc2sKSGFzd2hhNnZzQzZlZXAzQndFSWM0Z0x3NnVCSzB1K1FEclRCUUJid2I0VkNTbVQzcERDZy9yOHVveWRham90WQp1SzNER1JlRVkrMXZWdjJEeTJBMHhIUys1cDNiNGVUbHlneGZGUUlEQVFBQm80SUJiakNDQVdvd0h3WURWUjBqCkJCZ3dGb0FVVTNtL1dxb3JTczlVZ09IWW04Q2Q4cklEWnNzd0hRWURWUjBPQkJZRUZJMk1Yc1JVcllyaGQrbWIKK1pzRjRiZ0JqV0hoTUE0R0ExVWREd0VCL3dRRUF3SUJoakFTQmdOVkhSTUJBZjhFQ0RBR0FRSC9BZ0VBTUIwRwpBMVVkSlFRV01CUUdDQ3NHQVFVRkJ3TUJCZ2dyQmdFRkJRY0RBakFiQmdOVkhTQUVGREFTTUFZR0JGVWRJQUF3CkNBWUdaNEVNQVFJQk1GQUdBMVVkSHdSSk1FY3dSYUJEb0VHR1AyaDBkSEE2THk5amNtd3VkWE5sY25SeWRYTjAKTG1OdmJTOVZVMFZTVkhKMWMzUlNVMEZEWlhKMGFXWnBZMkYwYVc5dVFYVjBhRzl5YVhSNUxtTnliREIyQmdncgpCZ0VGQlFjQkFRUnFNR2d3UHdZSUt3WUJCUVVITUFLR00yaDBkSEE2THk5amNuUXVkWE5sY25SeWRYTjBMbU52CmJTOVZVMFZTVkhKMWMzUlNVMEZCWkdSVWNuVnpkRU5CTG1OeWREQWxCZ2dyQmdFRkJRY3dBWVlaYUhSMGNEb3YKTDI5amMzQXVkWE5sY25SeWRYTjBMbU52YlRBTkJna3Foa2lHOXcwQkFRd0ZBQU9DQWdFQU1yOWh2UTVJdzAvSAp1a2ROK0p4NEdRSGNFeDJBYi96RGNMUlNtakV6bWxkUyt6R2VhNlR2VktxSmpVQVhhUGdSRUh6U3lySHhWWWJICjdyTTJrWWIyT1ZHL1JyOFBvTHEwOTM1SnhDbzJGNTdrYURsNnI1Uk9WbSt5ZXp1L0NvYTl6Y1YzSEFPNE9MR2kKSDE5KzI0cmNSa2kyYUFyUHNyVzA0alRrWjZrNFpnbGUwcmo4blNnNkYwQW53bkpPS2YwaFBIelBFL3VXTE1VeApSUDBUN2RXYnFXbG9kM3p1NGYraytUWTRDRk01b29RMG5Cbnp2ZzZzMVNRMzZ5T29lTkRUNSsrU1IyUmlPU0x2Cnh2Y1J2aUtGeG1aRUpDYU9FREtOeUpPdUI1NkRQaS9aK2ZWR2ptTyt3ZWEwM0tiTklhaUdDcFhaTG9VbUd2MzgKc2JaWFFtMlYwVFAyT1JRR2drRTQ5WTlZM0lCYnBOVjlsWGo5cDV2Ly9jV29hYXNtNTZla0JZZGJxYmU0b3lBTApsNmxGaGQyemkrV0pONDRwRGZ3R0YvWTRRQTVDNUJJRyszdnp4aEZvWXQvam1QUVQyQlZQaTdGcDJSQmd2R1FxCjZqRzM1TFdqT2hTYkp1TUxlLzBDanJhWndUaVhXVGIycUhTaWhyWmU2OFprNnMrZ28vbHVucm90RWJhR21BaFkKTGNtc0pXVHlYblcwT01HdWYxcEdnK3BSeXJieG1SRTFhNlZxZThZQXNPZjR2bVN5cmNqQzhhempVZXFraytCNQp5T0dCUU1rS1crRVNQTUZnS3VPWHdJbEN5cFRQUnBnU2FidVkwTUxURFhKTFIyN2xrOFF5S0dPSFErU3dNajRLCjAwdS9JNXNVS1VFcm1nUWZreTN4eHpsSVBLMWFFbjg9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZkekNDQkYrZ0F3SUJBZ0lRRStvb2NGdjA3TzBNTm1NSmdHRkROakFOQmdrcWhraUc5dzBCQVF3RkFEQnYKTVFzd0NRWURWUVFHRXdKVFJURVVNQklHQTFVRUNoTUxRV1JrVkhKMWMzUWdRVUl4SmpBa0JnTlZCQXNUSFVGawpaRlJ5ZFhOMElFVjRkR1Z5Ym1Gc0lGUlVVQ0JPWlhSM2IzSnJNU0l3SUFZRFZRUURFeGxCWkdSVWNuVnpkQ0JGCmVIUmxjbTVoYkNCRFFTQlNiMjkwTUI0WERUQXdNRFV6TURFd05EZ3pPRm9YRFRJd01EVXpNREV3TkRnek9Gb3cKZ1lneEN6QUpCZ05WQkFZVEFsVlRNUk13RVFZRFZRUUlFd3BPWlhjZ1NtVnljMlY1TVJRd0VnWURWUVFIRXd0SwpaWEp6WlhrZ1EybDBlVEVlTUJ3R0ExVUVDaE1WVkdobElGVlRSVkpVVWxWVFZDQk9aWFIzYjNKck1TNHdMQVlEClZRUURFeVZWVTBWU1ZISjFjM1FnVWxOQklFTmxjblJwWm1sallYUnBiMjRnUVhWMGFHOXlhWFI1TUlJQ0lqQU4KQmdrcWhraUc5dzBCQVFFRkFBT0NBZzhBTUlJQ0NnS0NBZ0VBZ0JKbEZ6WU93OXNJczlDc1Z3MTI3YzBuMDB5dApVSU5oNHFvZ1RRa3RaQW5jem9tZnpEMnA3UGJQd2R6eDA3SFdlemNvRVN0SDJqbkd2RG9adEYrbXZYMmRvMk5DCnRuYnlxVHNya2ZqaWI5RHNGaUNRQ1Q3aTZIVEpHTFNSMUdKazIzK2pCdkdJR0dxUUlqeTgvaFB3aHhSNzl1UWYKanRUa1VjWVJaMFlJVWN1R0ZGUS92RFArZm15Yy94YWRHTDFSampXbXAyYkljbWZiSVdheDFKdDRBOEJRT3VqTQo4Tnk4bmt6K3J3V1dOUjlYV3JmL3p2azl0eXkyOWxUZHlPY1NPazJ1VElxM1hKcTB0eUE5eW44aU5LNStPMmhtCkFVVG5BVTVHVTVzellQZVV2bE0za0hORDh6TERVKy9icXY1MFRtbkhhNHhnazk3RXh3emY0VEt1ekpNN1VYaVYKWjR2dVBWYitETkJwRHhzUDh5VW1hek50OTI1SCtuTkQ1WDRPcFdheEtYd3loR05WaWNRTndaTlVNQmtUck5OOQpONmZyWFRwc05WemJRZGNTMnFsSkM5L1lnSW9KazJLT3RXYlBKWWpOaExpeFA2UTVEOWtDbnVzU1RKVjg4MnNGCnFWNFdnOHk0WitMb0U1M01XNExUVExQdFcvL2U1WE9zSXpzdEFMODFWWFFKU2RoSldCcC9ramJtVVpJTzh5WjkKSEUwWHZNbnNReWJRdjBGZlFLbEVSUFNaNTFlSG5sQWZWMVNvUHYxMFl5K3hVR1VKNWxoQ0xrTWFUTFR3SlVkWgorZ1FlazlRbVJrcFFnYkxldm5pMy9HY1Y0Y2xYaEI0UFk5YnBZcnJXWDFVdTZsekdLQWdFSlRtNERpdXA4a3lYCkhBYy9EVkwxN2U4dmdnOENBd0VBQWFPQjlEQ0I4VEFmQmdOVkhTTUVHREFXZ0JTdHZaaDZOTFFtOS9yRUpsVHYKQTczZ0pNdFVHakFkQmdOVkhRNEVGZ1FVVTNtL1dxb3JTczlVZ09IWW04Q2Q4cklEWnNzd0RnWURWUjBQQVFILwpCQVFEQWdHR01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0VRWURWUjBnQkFvd0NEQUdCZ1JWSFNBQU1FUUdBMVVkCkh3UTlNRHN3T2FBM29EV0dNMmgwZEhBNkx5OWpjbXd1ZFhObGNuUnlkWE4wTG1OdmJTOUJaR1JVY25WemRFVjQKZEdWeWJtRnNRMEZTYjI5MExtTnliREExQmdnckJnRUZCUWNCQVFRcE1DY3dKUVlJS3dZQkJRVUhNQUdHR1doMApkSEE2THk5dlkzTndMblZ6WlhKMGNuVnpkQzVqYjIwd0RRWUpLb1pJaHZjTkFRRU1CUUFEZ2dFQkFKTmw5amVECmxROWV3NEljSDlaMzV6eUt3S29KOE9rTEp2SGd3bXAxb2NkNXlibFNZTWdwRWc3d3JRUFdDY1IyMytXbWdaV24KUnRxQ1Y2bVZrc1cyandNaWJETjN3WHN5RjI0SHpsb1VRVG9GSkJ2MkZBWTdxQ1VrRHJ2TUtuWGR1WEJCUDN6UQpZelloQng5Ry8yQ2trZUZudk40ZmZoa1V5V05ua2VwbkIydTBqNHZBYmtOOXc2R0FiTElldkZPRmZkeVFvYVM4CkxlOUdjbGMxQmIrN1JydHViVGVadHY4amtwSEdia0Q0anlsVzZsL1ZYeFJUclBCUFllcjNJc3luVmd2aXVEUWYKSnRsN0dRVm9QN284MURnR290UG1qdzdqdEhGdFFFTEZoTFJBbFN2MFphQkllZllkZ1dPV25VOTE0UGg4NUk2cAowZkt0aXJPTXh5SE53dTg9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcFFJQkFBS0NBUUVBd0NCNWFXQ3hmN1FzL0tuekxxcW45QnR4REw5QTBZYnVCSW9QYUsyYkNmSkFkWnJyCkg0dE9ERUh6WXlEdDdBczZqSDR2Nm14K1d5RGozbTU0alp6YW5BTG4ya1l3ZFY2UERVdktOWWRqdmI2MENUcXgKNldhMDlaNndtT2lYRklpVFZUVzJmUWoyTWVaUnlnNHh0allkQnpNK0FRN1BZUGJIcTQwOUNoMVM2OXE3QnRYKwpNang4dHYwT3d2WjBJNlFVaEV4Mmpad3l1NjZHckxLdTk5UEU2eWc1czlmb1dTcFV2SjI4ckpLTnN5OTgzRlNzCllzNDg4cUhPTUdLMWgxRzJ5cHJPcEttUHpIRnFKc2l5cndWZndZZlNwY21xaFZzNVZ0WlVQQVBOTWVYdjhWSnEKUlpCaFcyeWg4MmRYS2dRMk8xNmhJZ1lWRjVJZUtKZU96alhYL1FJREFRQUJBb0lCQUFHUGNmVDdZazJuZExNVApuVVE4Z2hNdk10Nlg0Z3FobGliR3lVUEFIekY0UEhKSUVROUhSaG0rNGw5a2VkSXdNQ2hLY1JDdUUyT2hrNEF2CnRQNXZidTRUN3ZhY21kR21OREszTWh2M3JzVndlazFWNHZLQ2tVY3FaQVJGNVU0M0lyMHZLNzE5dUdRazJ2YXgKWVZGNXhJZ1ZzRFA1ZnhFcVIrcGFnZ3VtTzlGckNIbXJScDFuSUFkWGJiNXpmekM4eklBdG1XZkZ5bWVmVTdVcAo5OG8wVXkrNjZ3T2htMU9qaStvM2g0RGtEeTgzL2dvNW5lcmFmSDRaMkc5YmlZRTFqZnB1Y1l6YXJFcjFCVG9FCmhHV1dmYVRXQ2RYQ3RKS1JxTHU1eVFMc1AwL2JPb0xNUDRQWTBqSEtGL0xib1JUemFjVTJ6NDd6b2hHT1N4UmIKa21wdlpXa0NnWUVBOUsxN0svK05hNENpK3RrZjM0OWNMcEdzQ2NYckNpandQcm5uNlpqdHRxUU5nbXc4UGgvZAppMnlRTTREdDJGTEE1cER2WEN4RklJZjRhRzNnN0lFYjN4NlVUeVVMNXlCWjZTVFkrVmRQUFJyY2Q1c3hsV013CnRSdVZZL1lrWUFneHV4WXAxeG9MVWExSFFTZWlJZDRqSzVtWEpJWWVJdkJqS1BBcW1JQWV0WlVDZ1lFQXlRUjIKT0hDZFRkVGFzckdSZmZzWVNZVmxsZGhQeTZxUGQ3Q1N3bWJtV1VpZUJuODVGYmxyeUpXemZMUVhKUkh5bkhGUgpTTVdzTFJhd1dyaE10QnFBeU9OKzN4SFlnZ0xndEZWamozSjFzWGJZUHFQaTFhSCttaXZhZnlTdVg4UVQvQmFPCkIrR2wvUDAvbU5wbkZmNlFmZUtOUnhnbGdFK201WVFiVGhSMnJza0NnWUVBMTh1OXE2TjdUZ29wTkVhVk51NVEKcGYzeWxyZ0pRVyt6M0E3SXZKMFZZeFV6bVFqdTVQZmp4SmtlWVY1ZjUzK3RCRzFsdm95STkxVVV3TDNRTjZiegpOd2pZVXlsZ1l4dUVVUDBmcEdIZDBBM0Z6bk9BK3JsOTl1MTZCNnpLaml3TCtHNW12b0VJNUtPSUNhM3o4QnprCk5nc0RZOElxQ0RTdHNDaUoyUEIrcFRVQ2dZRUFvSlE0NEZOTnhmd1FqSWorNGJXeExDSXRDV3ZZS3FsZ25FdG8Kb1hWVDgrVG5uK2NIc2d3Q1J5VVhVYm9IZHl5RU0yYnVlUVMzeXZrQi9pYVYxNVlJWlBJZXlwSFY4OTNhcFJSRgpTVFUxUVlQZnNRSjRWUkpvY2I0d2VEclVOVnBNWUtlZjVEbmt3Rm1KOFZBZTQxb05FUkxtcXZGbUc3OEZZdm1LClduQk1jc2tDZ1lFQW53Wkl2MEY1S25SRjA0YkJTUzZpMU9BK3JuZHd4ZlEzSWNrTmdrLzR3S3l4NElZL21HWjcKYnlvSGRmZ0Vtc1pGRFEyUWZYSXJxOHZRRFVGcFlJN2EvSDlWOWZ3MlFjZzV1MUxrd3M5N2xBVHgrNmNOaTQ0VQp6OVBqUHFKaEwybTl4ZVpuc1dKR2FZQ2FOS0t2bWFzZm1LWjJuVmltOVN6SldTVDFjNW5nTmQ4PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMwRENDQWJpZ0F3SUJBZ0lVY1pJbUhZZ0E2UHhUVFRtZ3RQNjFtRHh1S2hVd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0VURVBNQTBHQTFVRUF3d0dVbTl2ZEVOQk1CNFhEVEl3TURneU5qQXlNekF3T1ZvWERUTXdNRGd5TkRBeQpNekF3T1Zvd0VURVBNQTBHQTFVRUF3d0dVbTl2ZEVOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXdmeGZXd3l6cUVXUVlWaElBcG4rVVVVR1huK1FnbmJCYlBTcERjd0ExSDVUQ09FQUIvOE0KTGsvTExqTEpWeUFqRlhNNElhOEF1VE1yRUdHUGx5T29GWVREZml6dTVTd29RZ1Ewb3UvZkIvQTl1dHZDVUpmYQprSmlsbXFtSXE1eHlkS1IzUEJQTlllSkNLU05sdUg3VXJ1VjR4MDFwTjJKazNXT2VYQ0RRMEtsN1BsNmZNS3o0CmpYY0hQdzMyQkVDektYdVBSRkRqM3o3bE5sWXVkL1B1S0FQd3pDNnRkRTlQK1FDRnV1d1pGRGJ3N1hCVllPUTIKYTgzR3lwd3VBS1V3enFsN2pldTVyQklpdlcwWkIxRW12UXFXN21TdkhBTFZla0JVd2tBZjVyWnF5VHNhTW9NRwp6eDFQRm9aUWJ2ZjZSOW1Ud3JTSVFhVXV4T0hnd3dhWVd3SURBUUFCb3lBd0hqQU1CZ05WSFJNRUJUQURBUUgvCk1BNEdBMVVkRHdFQi93UUVBd0lCaGpBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWVuais2YWtxRmV4MUhybzgKZksxcUIwN1NnVjJhV0FnVkdLKzZOQXVvM0dlMzM0QjhNK2g5UjlSN3F1azBWSXY2M0UwWUxrMXVFRlBKTFMwbAo1YWdLU2JpZUdpU2FIMjBma3cvYTUvR2dNbW5XNGY1b1FBdzJxTzlJdEdWZXR3Y1luSjNTU25Hbm1CVUFkU01OCmNoWkZQNXRPbXdaekVJTWdOWjFiS0orQTVSdEIxekgvWVNuVWd5YmtUcDlHMjJzMEFCaksrVTNXdm9kbktYQjgKbVFnaHA0Z2F2S1BURzYzdlpEMWROcEp1a1htSnJHNXc4WU1Bcm43cEl1Q2xBOWFKc0RzNTNVMVI4WEROOGZmUworcCtXc2MwcTJxZ2o1Wk1pV3ltOXBwUjdCNDFiOVdXeTkzS0poNGU0UkRoTHpXUzl5RlhMRm9DdjBhbXJyMFJ6ClB4Um1BZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: kibana
  namespace: cocktail-addon
  labels:
    app: kibana
data:
  kibana.yml: |-
    server:
      name: kibana
      host: "0.0.0.0"
      ssl:
        enabled: true
        key: /usr/share/kibana/config/tls.key
        certificate: /usr/share/kibana/config/tls.crt
    elasticsearch:
      requestTimeout: 360000
      hosts: https://elasticsearch.${NAMESPACE}.svc:9200
      username: ${KIBANA_USERNAME}
      password: ${KIBANA_PASSWORD}
      requestHeadersWhitelist: ["Authorization", "securitytenant", "security_tenant"]
      ssl:
        certificateAuthorities: /usr/share/kibana/config/ca.crt
        verificationMode: none
        key: /usr/share/kibana/config/kibana.key
        certificate: /usr/share/kibana/config/kibana.crt
    opendistro_security.allow_client_certificates: true
    opendistro_security.cookie.secure: false
    opendistro_security.auth.type: openid
    opendistro_security.openid.connect_url: https://hdcard-sso.acloud.run/auth/realms/paas-admin/.well-known/openid-configuration
    opendistro_security.openid.client_id: kibana-oidc
    opendistro_security.openid.client_secret: 39648dcc-5c7b-4e38-8d0c-391b8b5e41f4
    opendistro_security.openid.logout_url: https://hdcard-sso.acloud.run/auth/realms/paas-admin/protocol/openid-connect/logout
    opendistro_security.openid.base_redirect_url: https://hdcard-kb.acloud.run/
    opendistro_security.openid.header: Authorization
---
apiVersion: v1
kind: Service
metadata:
  name: kibana
  namespace: cocktail-addon
  labels:
    app: kibana
spec:
  type: ClusterIP
  selector:
    app: kibana
  ports:
  - name: https
    port: 443
    targetPort: https
---
apiVersion: networking.k8s.io/v1beta1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/backend-protocol: "HTTPS"
  labels:
    app: kibana
  name: kibana
  namespace: cocktail-addon
spec:
  #ingressClassName: "nginx"
  rules:
  - host: "hdcard-kb.acloud.run"
    http:
      paths:
      - backend:
          serviceName: kibana
          servicePort: https
        path: /
  tls:
  - hosts:
    - "hdcard-kb.acloud.run"
    secretName: kibana
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kibana
  namespace: cocktail-addon
  labels:
    app: kibana
spec:
  replicas: 1
  selector:
    matchLabels:
      app: kibana
  template:
    metadata:
      labels:
        app: kibana
    spec:
      containers:
        - name: kibana
          image: opendistroforelasticsearch/opendistroforelasticsearch-kibana:1.9.0
          imagePullPolicy: Always
          env:
            - name: NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: KIBANA_USERNAME
              valueFrom:
                secretKeyRef:
                  name: kibana
                  key: kb-username
            - name: KIBANA_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: kibana
                  key: kb-password
          resources:
            limits:
              cpu: 2500m
              memory: 2Gi
            requests:
              cpu: 500m
              memory: 512Mi
          #livenessProbe:
          #  initialDelaySeconds: 60
          #  timeoutSeconds: 10
          #  httpGet:
          #    path: /status
          #    port: 5601
          #readinessProbe:
          #  initialDelaySeconds: 60
          #  timeoutSeconds: 10
          #  httpGet:
          #    path: /status
          #    port: 5601
          ports:
            - containerPort: 5601
              name: https
          volumeMounts:
            - mountPath: /usr/share/kibana/config/kibana.yml
              name: config
              subPath: kibana.yml
            - mountPath: /usr/share/kibana/config/kibana.crt
              name: certs
              subPath: kibana.crt
            - mountPath: /usr/share/kibana/config/kibana.key
              name: certs
              subPath: kibana.key
            - mountPath: /usr/share/kibana/config/ca.crt
              name: certs
              subPath: ca.crt
            - mountPath: /usr/share/kibana/config/tls.crt
              name: certs
              subPath: tls.crt
            - mountPath: /usr/share/kibana/config/tls.key
              name: certs
              subPath: tls.key
          ports:
            - containerPort: 5601
              name: https
      serviceAccountName: kibana
      volumes:
        - name: config
          configMap:
            name: kibana
        - name: certs
          secret:
            secretName: kibana
      tolerations:
        - effect: NoSchedule
          key: node-type
          operator: Equal
          value: management
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: node-type
                    operator: In
                    values:
                      - management
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 1
              podAffinityTerm:
                topologyKey: "kubernetes.io/hostname"
                labelSelector:
                  matchLabels:
                    app: elasticsearch
                    role: client
      restartPolicy: Always
